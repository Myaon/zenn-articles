---
title: "UnityでぼくのかんがえたさいきょうのMVPアーキテクチャを実装して考察してみた話"
emoji: "🍖"
type: "tech" # tech: 技術記事 / idea: アイデア
topics: ["unity", "csharp", "architecture"]
published: false
---

# はじめに

## 本記事の内容

本記事では Unity における GUI 周りの実装で用いられる MVP アーキテクチャパターンについての内容を扱います。MVP アーキテクチャについて調べている中で筆者が疑問に思ったことをきっかけに、解決策を考えて実装し、最後にそれについて考察してみました。本記事はその過程を共有するというものです。

## 注意

本記事は MVP アーキテクチャの実装の提案をするもの**ではありません。**
趣旨としては「筆者が疑問に思ったことを検証した過程とその間に考えたことをつづる」というものです。後述しますが、ここで考えた実装は一部の状況でのみ有効なのではという感想を筆者はもちました。あくまでここに書いてあることは事実と筆者の感想ですので、そのあとの判断・解釈は皆様にお任せいたします。

しかし、もしかしたら間違った説明が含まれている可能性がありますので、その際には優しくご指摘していただけると幸いです（筆者は大規模アーキテクチャに関する経験がほぼないので、ぜひ温かい目で見守っていただけると嬉しいです）。

## 対象読者

- Unity の基礎知識がある
- C#言語のの基礎知識がある
- MVP アーキテクチャの概要がわかっている

本記事では説明なしに UniRx・DI フレームワークなどの技術スタックを扱いますのでそれらの知識があることと良いです。

## 検証環境とサンプルプロジェクト

今回の試行に際してサンプルプロジェクトをご用意しました。記事内でも触れることがあります。

https://github.com/drumath2237/DI-Used-Pure-MVP-testbed

サンプルプロジェクトで使用した（つまり本記事で前提となる）環境は次の通りです。

| 環境       |                                  |
| :--------- | :------------------------------- |
| Unity      | 2021.3.4f1                       |
| 開発機     | Windows 10 Home・Windows 11 Home |
| UniRx      | 7.1.0                            |
| VContainer | 1.12.0                           |

# n番煎じの疑問

## UnityにおけるMVPアーキテクチャ

Unity において GUI のロジックを実装する時によく使われる MVP アーキテクチャというアーキテクチャパターンがあります。「Unity MVP」と検索すると多数の日本語文献が見つかりますよね。
その中には具体的な実装も載せてくれている記事があり、そのおかげで筆者も MVP を勉強する際は独学で何とか習得できました。時には何度か記事で紹介してあったやり方で UI を組んでみたり、自分なりにアレンジして使ってみたりもしました。また最近は CyberAgent さんが開催された[Game Client College～設計編～](https://www.cyberagent.co.jp/careers/students/event/detail/id=27819)に参加して、MVP アーキテクチャを用いたゲーム開発について学びました。
MVP の実装パターンが何となく見えてきたところで前から思っていた疑問が頭をよぎりました。「なんで Presenter が非 MonoBehaviour じゃないんだろう......」。

## Presenterを非MonoBehaviourにしたい



## MonoBehaiourの問題点

## MVPアーキテクチャとMonoBehaviour

# さいきょうのMVPアーキテクチャを実装する

## サンプルプロジェクトの概要

## クラス構成

## 依存性注入

# 考察する

## Presenterのテスタビリティ

## そもそもPresenterのテストは必要なのか

## さいきょうのMVPアーキテクチャはさいきょうなのか

# おわりに

## 謝辞

## 参考文献
